# ========================================
# Viridial - Configuration Centralisée
# ========================================
# 
# Ce fichier contient toutes les variables d'environnement
# nécessaires pour le projet Viridial.
# 
# Usage:
#   1. Copier ce fichier vers .env à la racine
#   2. Remplir les valeurs réelles
#   3. Exécuter: ./scripts/setup-env.sh
#
# ⚠️  NE JAMAIS COMMITTER le fichier .env !
# ========================================

# ========================================
# ENVIRONNEMENT
# ========================================
NODE_ENV=production
# Options: development, staging, production

# ========================================
# URLS ET DOMAINES
# ========================================
# URL principale du frontend (HTTPS en production)
FRONTEND_URL=https://viridial.com

# URL de l'API Auth (pour les emails de vérification)
FRONTEND_AUTH_API_URL=https://viridial.com

# Domaine principal
DOMAIN=viridial.com

# IP du VPS (fallback si domaine non disponible)
VPS_IP=148.230.112.148

# ========================================
# BASE DE DONNÉES
# ========================================
# URL complète de connexion PostgreSQL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://viridial:123456@localhost:5432/viridial

# Variables individuelles (alternatives à DATABASE_URL)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=viridial
POSTGRES_PASSWORD=123456
POSTGRES_DB=viridial

# ========================================
# REDIS
# ========================================
# URL de connexion Redis (pour sessions/cache)
REDIS_URL=redis://localhost:6379
# Alternative: redis://:password@host:port
REDIS_PASSWORD=

# ========================================
# SMTP / EMAIL
# ========================================
# Configuration SMTP pour l'envoi d'emails
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=support@viridial.com
SMTP_PASS=S@upport!19823

# Email d'expéditeur
EMAIL_FROM=support@viridial.com
FROM_NAME=Viridial Support

# ========================================
# JWT / AUTHENTIFICATION
# ========================================
# Secret pour la génération des tokens JWT
# Générer avec: openssl rand -base64 32
JWT_SECRET=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
JWT_REFRESH_SECRET=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
JWT_ACCESS_SECRET=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

# Durée de vie des tokens (en secondes)
JWT_EXPIRES_IN=3600
JWT_REFRESH_EXPIRES_IN=604800
JWT_ACCESS_EXPIRES_IN=15m

# ========================================
# SERVICES - PORTS
# ========================================
# Ports des services
AUTH_SERVICE_PORT=3000
PROPERTY_SERVICE_PORT=3001
FRONTEND_PORT=3000
NGINX_PORT_HTTP=80
NGINX_PORT_HTTPS=443

# ========================================
# GOOGLE OIDC / SSO
# ========================================
# Configuration Google OAuth (optionnel)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=https://viridial.com/auth/google/callback

# ========================================
# MEILISEARCH
# ========================================
# Clé maître Meilisearch (pour la recherche)
MEILI_MASTER_KEY=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
MEILI_HOST=http://localhost:7700

# ========================================
# STRIPE (Billing - Optionnel)
# ========================================
STRIPE_SECRET_KEY=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
STRIPE_PUBLISHABLE_KEY=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
STRIPE_WEBHOOK_SECRET=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

# ========================================
# MONITORING / OBSERVABILITY (Optionnel)
# ========================================
# Sentry DSN pour le monitoring d'erreurs
SENTRY_DSN=

# ========================================
# DÉVELOPPEMENT LOCAL
# ========================================
# Décommenter pour le développement local
# DATABASE_URL=postgresql://viridial:password@localhost:5432/viridial_dev
# FRONTEND_URL=http://localhost:3000
# FRONTEND_AUTH_API_URL=http://localhost:3000
# NODE_ENV=development

# ========================================
# GEOLOCATION SERVICE
# ========================================
# Provider de géocodage: 'google', 'nominatim', ou 'stub' (développement)
# Par défaut: 'stub' (pour tests sans API)
GEOCODING_PROVIDER=stub

# Google Maps API Key (requis si provider='google')
# Obtenir une clé: https://console.cloud.google.com/google/maps-apis
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Nominatim Base URL (optionnel, par défaut: service officiel OpenStreetMap)
# Pour auto-hébergement: http://votre-nominatim-server
NOMINATIM_BASE_URL=https://nominatim.openstreetmap.org

# Cache TTL pour les résultats de géocodage (en secondes)
# Par défaut: 86400 (24 heures)
GEOCODING_CACHE_TTL=86400

# Port du service de géolocalisation
GEOLOCATION_SERVICE_PORT=3002
